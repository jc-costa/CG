# ============================================================================
# CONE - Quadric Surface Test
# ============================================================================
#
# DESCRIPTION:
#   A circular cone with apex at the origin, opening upward along the Z-axis.
#   The cone is a ruled quadric surface (can be generated by straight lines).
#
# QUADRIC CLASSIFICATION:
#   Type: Conical surface (ruled quadric)
#   Topology: Open surface meeting at apex
#   Gaussian Curvature: Zero except at apex (developable surface)
#   Note: The apex is a singular point
#
# MATHEMATICAL DEFINITION:
#   Implicit form:    x² + y² - (z·tan(α))² = 0
#                     or: x² + y² = (z/h)²·r²
#   Parametric form:  x = (z/h)·r·cos(θ)
#                     y = (z/h)·r·sin(θ)
#                     z = z
#   Where: θ ∈ [0, 2π], z ∈ [0, h]
#   Half-angle α = arctan(r/h)
#
# QUADRIC COEFFICIENTS (General form Ax² + By² + Cz² + ... + J = 0):
#   For cone x² + y² = (z/2)²:
#   A = B = 1
#   C = -1/4 = -0.25
#   D = E = F = G = H = I = J = 0
#   Matrix form: diag(1, 1, -0.25, 0)
#
# GEOMETRY:
#   - Apex: Origin (0, 0, 0)
#   - Base center: (0, 0, 2)
#   - Base radius: 1.0 unit
#   - Height: 2.0 units
#   - Half-angle: arctan(1/2) ≈ 26.57°
#   - Slant height: √(r² + h²) = √5 ≈ 2.236
#   - Lateral surface area: πr·slant ≈ 7.02
#   - Volume: (1/3)πr²h ≈ 2.094
#
# NORMAL CALCULATION:
#   On the surface at point (x, y, z):
#   The normal tilts outward at angle (90° - α) from vertical
#   N = normalize(x·h, y·h, r²) where h=height, r=base radius
#   Simplified: N = normalize(2x, 2y, 1) for this cone
#
# MESH STRUCTURE:
#   - 12 segments around circumference
#   - 12 triangles from apex to base edge
#   - 12 triangles for base cap
#   - Total: 24 triangles
#
# OBJ FEATURES TESTED:
#   - Fan triangulation from single point (apex)
#   - Varying normal directions
#   - Singular point handling
#
# ============================================================================

mtllib ./quadric_materials.mtl

# Apex vertex
v  0.000000  0.000000  0.000000

# Base circle vertices (z = 2)
v  1.000000  0.000000  2.000000
v  0.866025  0.500000  2.000000
v  0.500000  0.866025  2.000000
v  0.000000  1.000000  2.000000
v -0.500000  0.866025  2.000000
v -0.866025  0.500000  2.000000
v -1.000000  0.000000  2.000000
v -0.866025 -0.500000  2.000000
v -0.500000 -0.866025  2.000000
v  0.000000 -1.000000  2.000000
v  0.500000 -0.866025  2.000000
v  0.866025 -0.500000  2.000000

# Center of base
v  0.000000  0.000000  2.000000

# Side normals (tilted outward)
# For a cone, normal = normalize(r_hat * h + z_hat * r) where h=2, r=1
# Simplified: approximately 45 degrees
vn  0.894427  0.000000  0.447214
vn  0.774597  0.447214  0.447214
vn  0.447214  0.774597  0.447214
vn  0.000000  0.894427  0.447214
vn -0.447214  0.774597  0.447214
vn -0.774597  0.447214  0.447214
vn -0.894427  0.000000  0.447214
vn -0.774597 -0.447214  0.447214
vn -0.447214 -0.774597  0.447214
vn  0.000000 -0.894427  0.447214
vn  0.447214 -0.774597  0.447214
vn  0.774597 -0.447214  0.447214

# Base cap normal
vn  0.000000  0.000000  1.000000

usemtl diffuse_red

# Side faces (12 triangles from apex to base)
f 1//1 2//1 3//2
f 1//2 3//2 4//3
f 1//3 4//3 5//4
f 1//4 5//4 6//5
f 1//5 6//5 7//6
f 1//6 7//6 8//7
f 1//7 8//7 9//8
f 1//8 9//8 10//9
f 1//9 10//9 11//10
f 1//10 11//10 12//11
f 1//11 12//11 13//12
f 1//12 13//12 2//1

# Base cap
f 14//13 3//13 2//13
f 14//13 4//13 3//13
f 14//13 5//13 4//13
f 14//13 6//13 5//13
f 14//13 7//13 6//13
f 14//13 8//13 7//13
f 14//13 9//13 8//13
f 14//13 10//13 9//13
f 14//13 11//13 10//13
f 14//13 12//13 11//13
f 14//13 13//13 12//13
f 14//13 2//13 13//13

