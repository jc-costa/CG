# ============================================================================
# CORNELL BOX - Standard Test Scene for Global Illumination
# ============================================================================
#
# The Cornell Box is a test scene developed at Cornell University to validate
# global illumination algorithms. It features:
#   - Simple geometry (axis-aligned walls and two boxes)
#   - Colored walls (red and green) for visible color bleeding
#   - An area light on the ceiling
#   - Diffuse surfaces for predictable light transport
#
# Original Data: http://www.graphics.cornell.edu/online/box/data.html
#
# This OBJ file uses custom extensions for camera and light definitions:
#   c eye_idx target_idx up_idx  - Camera definition using vertex/normal indices
#   lp vertex_idx                - Point light at vertex position
#
# Coordinate System:
#   - Y is up
#   - Units are approximately in millimeters (original Cornell Box is ~55cm)
#   - Scene is normalized to fit in a 6x6x6 unit box during loading
#
# ============================================================================

# Reference material library
mtllib ./cornell_box.mtl

# ============================================================================
# FLOOR (y = 0)
# ============================================================================
# Vertices 1-4
v 552.8 0.0   0.0   
v 0.0 0.0   0.0
v 0.0 0.0 559.2
v 549.6 0.0 559.2

usemtl floor
f 1 2 3
f 1 3 4

# ============================================================================
# CEILING (y = 548.8)
# ============================================================================
# Vertices 5-8
v 556.0 548.8 0.0   
v 556.0 548.8 559.2
v 0.0 548.8 559.2
v 0.0 548.8   0.0

usemtl ceiling
f 5 6 7
f 5 7 8

# ============================================================================
# BACK WALL (z = 559.2)
# ============================================================================
# Vertices 9-12
v 549.6   0.0 559.2 
v 0.0   0.0 559.2
v 0.0 548.8 559.2
v 556.0 548.8 559.2

usemtl back
f 9 10 11
f 9 11 12

# ============================================================================
# RIGHT WALL - GREEN (x = 0)
# ============================================================================
# Vertices 13-16
v 0.0   0.0 559.2   
v 0.0   0.0   0.0
v 0.0 548.8   0.0
v 0.0 548.8 559.2

usemtl green
f 13 14 15
f 13 15 16

# ============================================================================
# LEFT WALL - RED (x ≈ 550)
# ============================================================================
# Vertices 17-20
v 552.8   0.0   0.0 
v 549.6   0.0 559.2
v 556.0 548.8 559.2
v 556.0 548.8   0.0

usemtl red
f 17 18 19
f 17 19 20

# ============================================================================
# SHORT BLOCK (front-right)
# ============================================================================
# A smaller cube rotated ~17° about Y axis
# Top face at y = 165
# Vertices 21-40 (5 faces, no bottom)

# Top face
v 130.0 165.0  65.0 
v 82.0 165.0 225.0
v 240.0 165.0 272.0
v 290.0 165.0 114.0

# Right face
v 290.0   0.0 114.0
v 290.0 165.0 114.0
v 240.0 165.0 272.0
v 240.0   0.0 272.0

# Front face
v 130.0   0.0  65.0
v 130.0 165.0  65.0
v 290.0 165.0 114.0
v 290.0   0.0 114.0

# Left face
v 82.0   0.0 225.0
v 82.0 165.0 225.0
v 130.0 165.0  65.0
v 130.0   0.0  65.0

# Back face
v 240.0   0.0 272.0
v 240.0 165.0 272.0
v 82.0 165.0 225.0
v 82.0   0.0 225.0

usemtl short_box
f 21 22 23
f 21 23 24
f 25 26 27
f 25 27 28
f 29 30 31
f 29 31 32
f 33 34 35
f 33 35 36
f 37 38 39
f 37 39 40

# ============================================================================
# TALL BLOCK (back-left)
# ============================================================================
# A taller cube rotated ~-17° about Y axis
# Top face at y = 330
# Vertices 41-60 (5 faces, no bottom)

# Top face
v 423.0 330.0 247.0
v 265.0 330.0 296.0
v 314.0 330.0 456.0
v 472.0 330.0 406.0

# Right face
v 423.0   0.0 247.0
v 423.0 330.0 247.0
v 472.0 330.0 406.0
v 472.0   0.0 406.0

# Back face
v 472.0   0.0 406.0
v 472.0 330.0 406.0
v 314.0 330.0 456.0
v 314.0   0.0 456.0

# Left face
v 314.0   0.0 456.0
v 314.0 330.0 456.0
v 265.0 330.0 296.0
v 265.0   0.0 296.0

# Front face
v 265.0   0.0 296.0
v 265.0 330.0 296.0
v 423.0 330.0 247.0
v 423.0   0.0 247.0

usemtl tall_box
f 41 42 43
f 41 43 44
f 45 46 47
f 45 47 48
f 49 50 51
f 49 51 52
f 53 54 55
f 53 55 56
f 57 58 59
f 57 59 60

# ============================================================================
# AREA LIGHT (on ceiling)
# ============================================================================
# A small rectangular light source centered on the ceiling
# Original Cornell Box light dimensions (approximately):
#   x: 213 to 343 (130 units wide)
#   y: 548.8 (on ceiling, slightly below for visibility)
#   z: 227 to 332 (105 units deep)
#
# Vertices 61-64

v 343.0 548.7 227.0
v 343.0 548.7 332.0
v 213.0 548.7 332.0
v 213.0 548.7 227.0

usemtl light
# Area light quad (facing downward into the room)
# Winding order: counter-clockwise when viewed from below
# to ensure normals point down into the room
f 64 63 62
f 64 62 61

# Light center position for point light reference
# Vertex 65
v 278 548.5 279.5

# Custom extension: lp <vertex_index>
# Defines a point light at the referenced vertex position
# Negative index -1 means "the last vertex" (vertex 65)
lp -1

# ============================================================================
# CAMERA DEFINITION
# ============================================================================
# Camera positioned outside the box, looking in
# Uses custom extension: c <eye_idx> <target_idx> <up_idx>
#   eye_idx    - Vertex index for camera position
#   target_idx - Vertex index for look-at target
#   up_idx     - Normal index for up vector

# Camera eye position (outside box, looking in)
v  278 273 -800

# Camera target (center of box)
v  278 273 279.5

# Up vector (Y-up)
vn  0 1 0

# Group name for camera (optional)
g Camera

# Custom extension: c <eye> <target> <up>
# Negative indices are relative to end of list
# -2 = second to last vertex (eye)
# -1 = last vertex (target)
# -1 = last normal (up)
c -2 -1 -1
